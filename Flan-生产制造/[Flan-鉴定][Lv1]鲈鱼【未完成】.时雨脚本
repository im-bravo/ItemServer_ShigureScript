// 用鲈鱼烧鉴定
// 请先定居新城

isJobSkill = 信息提示("鉴定是你本职技能吗？", 36) == 5

isBack = 0

okExpLv1 = 0
skillLv = 获取技能信息("鉴定")

如果(skillLv == 1)
	okExpLv1 = 30
	如果(isJobSkill == 0)
		okExpLv1 = 15
	如果尾()
如果尾()

如果(skillLv == 2)
	okExpLv1 = 15
	如果(isJobSkill == 0)
		okExpLv1 = 7
	如果尾()
如果尾()

如果(skillLv == 3)
	okExpLv1 = 10
	如果(isJobSkill == 0)
		okExpLv1 = 5
	如果尾()
如果尾()

totalExp = 0
onceExp = 0

循环( 1 )

	循环(人物详细信息(34) == "艾尔莎岛")
		//如果( isBack == 0 )
			移动到(157,94)
			人物转身(1)
			循环(人物详细信息(34) != "艾夏岛")
				等待(100)
			循环尾()
		//如果尾()
	循环尾()

	循环(人物详细信息(34) == "拿潘食品店\\z0")
		如果(isBack == 0)
			移动到(10,13)
			onceExp = 0
			循环(人物详细信息(4) > 10)
				丢弃物品("鲈鱼", 2, 1, 1)
				对话NPC(3, 7, "", "", "", 2)
				循环(获取物品数量("抓猫用的鱼？") < 1)
					等待(100)
				循环尾()

				result = 高速鉴定("")

				如果(result == 0)
					onceExp = onceExp + okExpLv1
					totalExp = totalExp + okExpLv1
				如果尾()
				如果(result != 0)
					发送聊天("暂时鉴定不了[" $ result $ "]", 1, 1)
					丢弃物品("抓猫用的鱼？", 2, 1, 1)
				如果尾()

				如果(获取信息记录("<back>","普通") != "")
					isBack = 1
					跳出循环()
				如果尾()
			循环尾()
			发送聊天("单次Exp:" $ onceExp $ ", 总共Exp:" $ totalExp, 1, 1)

			isBack = 1
		如果尾()

		如果(isBack != 0)
			自动寻路(3,13)
			//等0~4s过图
			tryCount = 0
			循环(tryCount < 40 && 人物详细信息(34) != "法兰城")
				等待(100)
				tryCount = tryCount + 1
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "法兰城")
		如果(isBack == 0)
			自动寻路(217,53)
			//等0~4s过图
			tryCount = 0
			循环(tryCount < 40 && 人物详细信息(34) != "拿潘食品店\\z0")
				等待(100)
				tryCount = tryCount + 1
			循环尾()
		如果尾()
		如果(isBack != 0)
			自动寻路(221,83)
			//等0~4s过图
			tryCount = 0
			循环(tryCount < 40 && 人物详细信息(34) != "医院\\z0")
				等待(100)
				tryCount = tryCount + 1
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "医院\\z0")
		如果(isBack == 0)
			自动寻路(12,42)
			循环(人物详细信息(34) != "法兰城")
				等待(100)
			循环尾()
		如果尾()

		如果(isBack != 0)
			移动到(8,31)
			护士恢复(0)
			isBack = 0
			循环( 获取信息记录("<back>","普通") != "" )
				//等待消除全部<back>
				等待(100)
			循环尾()
		如果尾()
	循环尾()

循环尾()
