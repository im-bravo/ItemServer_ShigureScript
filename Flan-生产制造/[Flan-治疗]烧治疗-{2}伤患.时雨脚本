// 刷治疗 - 制造伤患：挨十年戒指boss一顿揍

//配合人名
targetName = ""

如果(targetName == "")
	waitSay = 信息提示("是否自动获取目标人名，等待他说话，注意请不要加队！",36) == 5
	如果(waitSay != 0)
		speaker = ""
		循环(1)
			speaker = 获取信息记录( "<我要烧治疗>", "普通")
			如果(speaker != "")
				targetName = speaker
				跳出循环()
			如果尾()

		循环尾()
	如果尾()

	如果(waitSay == 0)
		targetName = 信息输入("请指定你要配合的人的名字","为了防止冲突","")
	如果尾()

	发送聊天("配合[" $ targetName $ "]烧治疗！", 1, 1)
如果尾()

humanBackHP = 人物详细信息(3)*0.5
humanBackMP = 人物详细信息(5)*0.11

//当前要干嘛
curAction = "治疗"
//信息输入("挨揍，治疗","去干什么","挨揍")

循环(1)

	循环(人物详细信息(34) == "艾尔莎岛")
		flag = 0

		如果(flag == 0)
			移动到(140,105)
			循环(人物详细信息(34) != "里谢里雅堡")
				对话NPC(1,2,"","","",2)
				tryCount = 0
				循环(tryCount < 20 && 人物详细信息(34) != "里谢里雅堡")
					等待(100)
					tryCount = tryCount + 1
				循环尾()
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "法兰城")
		curX = 人物详细信息(35)
		curY = 人物详细信息(36)
		flag = 0
		//西1
		如果(curX >= 53 && curX <= 73 && curY >= 69 && curY <= 89)
			flag = 1
			自动寻路(63,79)
			人物转身(0)
			等待(640)
		如果尾()
		//西2
		如果(curX >= 62 && curX <= 80 && curY >= 113 && curY <= 133)
			flag = 5
			自动寻路(72,123)
			人物转身(2)
			等待(640)
		如果尾()
		//东1
		如果(curX >= 223 && curX <= 243 && curY >= 68 && curY <= 88)
			flag = 6
			自动寻路(233,78)
			人物转身(0)
			//等0~4s过图
			tryCount = 0
			循环(tryCount < 40 && 人物详细信息(34) != "市场一楼\S-\S宠物交易区\\z0")
				等待(100)
				tryCount = tryCount + 1
			循环尾()
		如果尾()
		//东2
		如果(curX >= 232 && curX <= 252 && curY >= 90 && curY <= 110)
			flag = 2
			自动寻路(242,100)
			人物转身(2)
			//等0~4s过图
			tryCount = 0
			循环(tryCount < 40 && 人物详细信息(34) != "市场三楼\S-\S修理专区\\z0")
				等待(100)
				tryCount = tryCount + 1
			循环尾()
		如果尾()
		//南2
		如果(curX >= 131 && curX <= 151 && curY >= 138 && curY <= 158)
			flag = 3
			自动寻路(153,101)
			移动到(153,100)
			tryCount = 0
			//等0~4s过图
			循环(tryCount < 40 && 人物详细信息(34) != "里谢里雅堡")
				等待(100)
				tryCount = tryCount + 1
			循环尾()
		如果尾()
		//南1
		如果(curX >= 152 && curX <= 172 && curY >= 120 && curY <= 140)
			flag = 4
			自动寻路(153,101)
			移动到(153,100)
			tryCount = 0
			//等0~4s过图
			循环(tryCount < 40 && 人物详细信息(34) != "里谢里雅堡")
				等待(100)
				tryCount = tryCount + 1
			循环尾()
		如果尾()

	循环尾()

	循环(人物详细信息(34) == "市场三楼\S-\S修理专区\\z0")
		自动寻路(46,16)
		人物转身(0)
		tryCount = 0
		//等0~4s过图
		循环(tryCount < 40 && 人物详细信息(34) != "法兰城")
			等待(100)
			tryCount = tryCount + 1
		循环尾()
	循环尾()

	循环(人物详细信息(34) == "市场一楼\S-\S宠物交易区\\z0")
		自动寻路(46,16)
		人物转身(0)
		tryCount = 0
		//等0~4s过图
		循环(tryCount < 40 && 人物详细信息(34) != "法兰城")
			等待(100)
			tryCount = tryCount + 1
		循环尾()
	循环尾()

	循环(人物详细信息(34) == "里谢里雅堡")
		如果(curAction == "治疗")
			//受伤，未组队治疗就去组队
			如果(人物详细信息(31) > 0 && 人物详细信息(37) < 2)
				自动寻路(33,90)
				加入队伍(1, targetName)
			如果尾()
			//治疗好了
			如果(人物详细信息(31) == 0)
				退出队伍()
				curAction = "挨揍"
			如果尾()
		如果尾()

		如果(curAction == "挨揍")
			自动寻路(30,81)
			循环(人物详细信息(34) != "追忆之路\\z0")
				对话NPC(0,7,"","","",1)
				tryCount = 0
				循环(tryCount < 20 && 人物详细信息(34) != "追忆之路\\z0")
					等待(100)
					tryCount = tryCount + 1
				循环尾()
			循环尾()
			//发送聊天("到达[追忆之路]")
		如果尾()

	循环尾()

	循环(人物详细信息(34) == "追忆之路\\z0")
		如果(curAction != "")
			如果(人物详细信息(31) == 0)
				移动到(15,111)
				对话NPC(0,7,"","","",1)
				等待(1000)
				等待战斗结束()
			如果尾()
			如果(人物详细信息(31) > 0)
				如果(人物详细信息(34) == "追忆之路\\z0")
					登出回城()
					等待(1000)
				如果尾()
				curAction = "治疗"
			如果尾()
		如果尾()
	循环尾()

循环尾()








