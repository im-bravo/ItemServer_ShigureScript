// 咬花刷声望
// 身上必须有【咬花】，可从道具商城购买（１５００点，呵呵哒）

curPet = 当前出战宠物()

humanBackHP = 人物详细信息(3)*0.5
humanBackMP = 人物详细信息(5)*0.05
petBackHP = 宠物详细信息(curPet,3)*0.4
petBackMP = 宠物详细信息(curPet,5)*0.05
isAutoSettings = 信息提示("是否以下列数值作为设置{ " $ "人回补血:" $ humanBackHP $ ", " $ "人回补魔:" $ humanBackMP $ ", " $ "宠回补血:" $ petBackHP $ ", " $ "宠回补魔:" $ petBackMP $ " }","36")
如果(isAutoSettings != 5)
	humanBackHP = 信息输入("人回补血值","人回补血值",humanBackHP)
	humanBackMP = 信息输入("人回补魔值","人回补魔值",humanBackMP)
	petBackHP = 信息输入("宠回补血值","宠回补血值",petBackHP)
	petBackMP = 信息输入("宠回补魔值","宠回补魔值",petBackMP)
如果尾()

// 当前动作【去咬花，回补，看声望，取称号】
curAction = "请先去取得咬花"

// 9 ~ 28
iPackPos = 9
循环(iPackPos <= 28)
	targetItem = 物品详细信息(iPackPos, 1)
	如果(targetItem == "咬花")
		curAction = "去咬花"
		跳出循环()
	如果尾()
	iPackPos = iPackPos + 1
循环尾()

//战斗次数
battleCount = 0

循环( 1 )

	循环(人物详细信息(34) == "艾尔莎岛")
		flag = 0

		如果(curAction == "去咬花")
			flag = 1
			移动到(157,94)
			人物转身(1)
			循环(人物详细信息(34) != "艾夏岛")
				等待(100)
			循环尾()
		如果尾()

		如果(curAction == "回补")
			flag = 2
			移动到(157,94)
			人物转身(1)
			循环(人物详细信息(34) != "艾夏岛")
				等待(100)
			循环尾()
		如果尾()

		如果(flag == 0)
			发送聊天("未知的动作[" $ curAction $ "]", 6, 1)
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "艾夏岛")
		flag = 0
		如果(curAction == "去咬花")
			flag = 1
			curX = 人物详细信息(35)
			curY = 人物详细信息(36)
			flag1 = 0
			如果(curX >= 81 && curX <= 86 && curY >= 108 && curY <= 117) // 在传送石1范围
				flag1 = 1
				自动寻路(106,120)
				循环(人物详细信息(34) != "回忆之间\\z0")
					对话NPC(3,7,"","","",1)
					等待(100)
				循环尾()
			如果尾()

			如果(flag1 == 0)
				自动寻路(106,120)
				循环(人物详细信息(34) != "回忆之间\\z0")
					对话NPC(3,7,"","","",1)
					等待(100)
				循环尾()
			如果尾()
		如果尾()

		如果(curAction == "回补")
			flag = 2
			自动寻路(112,81)
			循环(人物详细信息(34) != "医院\\z0")
				等待(100)
			循环尾()
		如果尾()

		如果(flag == 0)
			发送聊天("未知的动作[" $ curAction $ "]", 6, 1)
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "回忆之间\\z0")
		如果(curAction == "去咬花")
			移动到(8,8)
			battleCount = battleCount + 1
			对话NPC(0,7,"","","",1)
			发送聊天("第" $ battleCount $ "次战斗",4,1)
			等待(1000)

			等待战斗结束()
			如果(人物详细信息(2) < humanBackHP)
				curAction = "回补"
			如果尾()
			如果(人物详细信息(4) < humanBackMP)
				curAction = "回补"
			如果尾()

		如果尾()

		如果(curAction == "回补")
			登出回城()
			循环(人物详细信息(34) != "艾尔莎岛")
				等待(100)
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "医院\\z0")
		flag = 0
		如果(curAction == "去咬花")
			flag = 1
			自动寻路(28,52)
			循环(人物详细信息(34) != "艾夏岛")
				等待(100)
			循环尾()
		如果尾()

		如果(curAction == "回补")
			flag = 2
			//移动到(35,45)
			//移动到(35,47)
			移动到(35,45)
			移动到(35,46)
			护士恢复(2)
			curAction = "去咬花"

			循环( 获取信息记录("<back>","普通") != "" )
				//等待消除全部<back>
				等待(100)
			循环尾()
		如果尾()

		如果(flag == 0)
			发送聊天("未知的动作[" $ curAction $ "]", 6, 1)
		如果尾()

	循环尾()

循环尾()








