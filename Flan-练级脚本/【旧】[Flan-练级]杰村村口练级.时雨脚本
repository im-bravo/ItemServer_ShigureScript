// 杰诺瓦镇村口练级

curPet = 当前出战宠物()
humanBackHP = 人物详细信息(3)*0.36
humanBackMP = 人物详细信息(5)*0.05
petBackHP = 宠物详细信息(curPet,3)*0.3
petBackMP = 宠物详细信息(curPet,5)*0.05
isAutoSettings = 信息提示("是否以下列数值作为设置{ " $ "人回补血:" $ humanBackHP $ ", " $ "人回补魔:" $ humanBackMP $ ", " $ "宠回补血:" $ petBackHP $ ", " $ "宠回补魔:" $ petBackMP $ " }","36") == 5
如果(isAutoSettings == 0)
	humanBackHP = 信息输入("人回补血值","人回补血值",humanBackHP)
	humanBackMP = 信息输入("人回补魔值","人回补魔值",humanBackMP)
	petBackHP = 信息输入("宠回补血值","宠回补血值",petBackHP)
	petBackMP = 信息输入("宠回补魔值","宠回补魔值",petBackMP)
如果尾()

// 执行动作【练级，回补】
curAction = 信息输入("执行动作【练级，回补】","执行动作","练级")

battleCount = 0

循环( 1 )

	循环(人物详细信息(34) == "艾尔莎岛")
		//发送聊天("在[" $ 人物详细信息(34) $ "]执行[" $ curAction $ "]...", 4, 1)
		flag = 0
		如果(flag == 0)
			移动到(140,105)
			循环(人物详细信息(34) != "里谢里雅堡")
				对话NPC(1,7,"","","","")
				等待(100)
			循环尾()
		如果尾()

	循环尾()

	循环(人物详细信息(34) == "里谢里雅堡")
		//发送聊天("在[" $ 人物详细信息(34) $ "]执行[" $ curAction $ "]...", 4, 1)
		flag = 0
		如果(curAction == "练级")
			flag = 1
			自动寻路(41,50)
			循环(人物详细信息(34) != "里谢里雅堡\S1楼\\z0")
				等待(100)
			循环尾()
			
		如果尾()

		如果(curAction == "回补")
			flag = 3
			curPet = 当前出战宠物()
			如果(人物详细信息(2) < 人物详细信息(3) || 人物详细信息(4) < 人物详细信息(5) || 宠物详细信息(curPet,2) < 宠物详细信息(curPet,3) || 宠物详细信息(curPet,4) < 宠物详细信息(curPet,5))
				自动寻路(34,89)
				护士恢复(1)
			如果尾()
			curAction = "练级"
			
		如果尾()

		如果(flag == 0)
			发送聊天("动作[" $ curAction $ "]在[" $ 人物详细信息(34) $ "]是未定义的...", 6, 1)
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "里谢里雅堡\S1楼\\z0")
		//发送聊天("在[" $ 人物详细信息(34) $ "]执行[" $ curAction $ "]...", 4, 1)
		flag = 0
		如果(curAction == "练级")
			flag = 1
			自动寻路(45,20)
			循环(人物详细信息(34) != "启程之间\\z0")
				等待(100)
			循环尾()
			
		如果尾()

		如果(flag == 0)
			发送聊天("动作[" $ curAction $ "]在[" $ 人物详细信息(34) $ "]是未定义的...", 6, 1)
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "启程之间\\z0")
		//发送聊天("在[" $ 人物详细信息(34) $ "]执行[" $ curAction $ "]...", 4, 1)
		flag = 0
		如果(curAction == "练级")
			flag = 1
			自动寻路(15,5)
			循环(人物详细信息(34) != "杰诺瓦镇的传送点\\z0")
				对话NPC(1,7,"","","","")
				等待(100)
			循环尾()
			
		如果尾()

		如果(flag == 0)
			发送聊天("动作[" $ curAction $ "]在[" $ 人物详细信息(34) $ "]是未定义的...", 6, 1)
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "杰诺瓦镇的传送点\\z0")
		//发送聊天("在[" $ 人物详细信息(34) $ "]执行[" $ curAction $ "]...", 4, 1)
		flag = 0
		如果(curAction == "练级")
			flag = 1
			自动寻路(14,6)
			循环(人物详细信息(34) != "村长的家\\z0")
				等待(100)
			循环尾()
			
		如果尾()

		如果(flag == 0)
			发送聊天("动作[" $ curAction $ "]在[" $ 人物详细信息(34) $ "]是未定义的...", 6, 1)
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "村长的家\\z0")
		//发送聊天("在[" $ 人物详细信息(34) $ "]执行[" $ curAction $ "]...", 4, 1)
		flag = 0
		如果(curAction == "练级")
			flag = 1
			自动寻路(1,9)
			循环(人物详细信息(34) != "杰诺瓦镇")
				等待(100)
			循环尾()
			
		如果尾()

		如果(flag == 0)
			发送聊天("动作[" $ curAction $ "]在[" $ 人物详细信息(34) $ "]是未定义的...", 6, 1)
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "杰诺瓦镇")
		//发送聊天("在[" $ 人物详细信息(34) $ "]执行[" $ curAction $ "]...", 4, 1)
		flag = 0
		如果(curAction == "练级")
			flag = 1
			自动寻路(24,40)
			循环(人物详细信息(34) != "莎莲娜")
				等待(100)
			循环尾()
			
		如果尾()

		如果(curAction == "回补")
			flag = 2
			//有魔石
			isHasStone = 获取物品数量("魔石","") > 0
			如果(isHasStone != 0)
				自动寻路(43,23)
				循环(人物详细信息(34) != "杂货店\\z0")
					等待(100)
				循环尾()
			如果尾()
			//没魔石
			如果(isHasStone == 0)
				自动寻路(44,33)
				循环(人物详细信息(34) != "医院\\z0")
					等待(100)
				循环尾()
			如果尾()
			
		如果尾()

		如果(flag == 0)
			发送聊天("动作[" $ curAction $ "]在[" $ 人物详细信息(34) $ "]是未定义的...", 6, 1)
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "莎莲娜")
		//发送聊天("在[" $ 人物详细信息(34) $ "]执行[" $ curAction $ "]...", 4, 1)
		flag = 0
		如果(curAction == "练级")
			flag = 1
			移动到(214,456)
			循环( 获取信息记录("<回补>","普通") != "" )
				//等待消除全部<回补>
				等待(100)
			循环尾()

			// 自动遇敌开始了
			自动遇敌(1,3,200)
			循环(curAction == "练级")
				等待战斗结束()
				curPet = 当前出战宠物()
				如果(人物详细信息(2) < humanBackHP || 人物详细信息(4) < humanBackMP || 宠物详细信息(curPet,2) < petBackHP || 宠物详细信息(curPet,4) < petBackMP)
					curAction = "回补"
					跳出循环()
				如果尾()

				如果( 获取信息记录("<回补>","普通") != "" )
					curAction = "回补"
					跳出循环()
				如果尾()
			循环尾()
			自动遇敌(0)

		如果尾()

		如果(curAction == "回补")
			flag = 2
			自动寻路(217,456)
			循环(人物详细信息(34) != "杰诺瓦镇")
				等待(100)
			循环尾()
			
		如果尾()

		如果(flag == 0)
			发送聊天("动作[" $ curAction $ "]在[" $ 人物详细信息(34) $ "]是未定义的...", 6, 1)
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "杂货店\\z0")
		//发送聊天("在[" $ 人物详细信息(34) $ "]执行[" $ curAction $ "]...", 4, 1)
		flag = 0
		如果(curAction == "回补")
			flag = 1
			移动到(11,12)
			出售物品(2,"魔石")
			//判断是否不需要回补
			curPet = 当前出战宠物()
			需要回补 = 人物详细信息(2) < 人物详细信息(3) || 人物详细信息(4) < 人物详细信息(5) || 宠物详细信息(curPet,2) < 宠物详细信息(curPet,3) || 宠物详细信息(curPet,4) < 宠物详细信息(curPet,5)
			如果(需要回补==0)
				curAction = "练级"
			如果尾()

			自动寻路(9,16)
			循环(人物详细信息(34) != "杰诺瓦镇")
				等待(100)
			循环尾()
			
		如果尾()
		如果(curAction == "练级")
			flag = 2
			自动寻路(9,16)
			循环(人物详细信息(34) != "杰诺瓦镇")
				等待(100)
			循环尾()

			
		如果尾()

		如果(flag == 0)
			发送聊天("动作[" $ curAction $ "]在[" $ 人物详细信息(34) $ "]是未定义的...", 6, 1)
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "医院\\z0")
		//发送聊天("在[" $ 人物详细信息(34) $ "]执行[" $ curAction $ "]...", 4, 1)
		flag = 0
		如果(curAction == "回补")
			flag = 1
			移动到(15,9)
			护士恢复(0)
			curAction = "练级"

			
		如果尾()

		如果(curAction == "练级")
			flag = 2
			自动寻路(1,9)
			循环(人物详细信息(34) != "杰诺瓦镇")
				等待(100)
			循环尾()

			
		如果尾()

		如果(flag == 0)
			发送聊天("动作[" $ curAction $ "]在[" $ 人物详细信息(34) $ "]是未定义的...", 6, 1)
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "法兰城")
		//发送聊天("在[" $ 人物详细信息(34) $ "]执行[" $ curAction $ "]...", 4, 1)
		flag = 0

		如果(flag == 0)
			发送聊天("动作[" $ curAction $ "]在[" $ 人物详细信息(34) $ "]是未定义的...", 6, 1)
		如果尾()
	循环尾()

循环尾()








