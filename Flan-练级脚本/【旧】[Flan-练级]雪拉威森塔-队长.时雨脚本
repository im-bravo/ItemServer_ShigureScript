// 雪拉威森塔(10~95)队长，目前仅支持T49

//isSaleStone = 信息提示("包满是否出售魔石","36")
tower = 信息输入("塔几？","输入要去的塔层数(10~50)","49")
nPeople = 信息输入("队伍人数","输入队伍成员数(0~5)",人物详细信息(37))

curPet = 当前出战宠物()
humanBackHP = 人物详细信息(3)*0.5
humanBackMP = 人物详细信息(5)*0.05
petBackHP = 宠物详细信息(curPet,3)*0.4
petBackMP = 宠物详细信息(curPet,5)*0.05
isAutoSettings = 信息提示("是否以下列数值作为设置{ " $ "人回补血:" $ humanBackHP $ ", " $ "人回补魔:" $ humanBackMP $ ", " $ "宠回补血:" $ petBackHP $ ", " $ "宠回补魔:" $ petBackMP $ " }","36")
如果(isAutoSettings != 5)
	humanBackHP = 信息输入("人回补血值","人回补血值",humanBackHP)
	humanBackMP = 信息输入("人回补魔值","人回补魔值",humanBackMP)
	petBackHP = 信息输入("宠回补血值","宠回补血值",petBackHP)
	petBackMP = 信息输入("宠回补魔值","宠回补魔值",petBackMP)
如果尾()

isBack = 0

循环( 1 )

	循环(人物详细信息(34) == "艾尔莎岛")
		自动寻路(164,153)
		对话NPC(3,7,"","","","")
		循环(人物详细信息(34) != "利夏岛")
			等待(100)
		循环尾()
	循环尾()

	循环(人物详细信息(34) == "利夏岛")
		// 组队判断
		如果(人物详细信息(37) < nPeople)
			移动到(93,63)
			循环(人物详细信息(37) < nPeople)
				等待(1000)
			循环尾()
		如果尾()
		//组满了人数

		自动寻路(90,99)
		循环(人物详细信息(34) != "国民会馆\\z0")
			等待(100)
		循环尾()
	循环尾()

	循环(人物详细信息(34) == "国民会馆\\z0")
		如果( isBack == 0 )
			自动寻路(108,39)
			循环(人物详细信息(34) != "雪拉威森塔１层\\z0")
				等待(100)
			循环尾()

		如果尾()

		如果(isBack != 0)
			移动到(108,43)
			移动到(110,43)
			移动到(109,42)
			移动到(110,43)
			移动到(109,42)
			移动到(110,43)
			移动到(109,42)

			//开始卖东西
			出售物品(2,"魔石")
			如果(人物详细信息(37) > 1)
				等待(15000)
			如果尾()
			
			自动寻路(107,51)
			移动到(109,51)
			移动到(107,51)
			//开始恢复
			护士恢复(3)
			isBack = 0
			循环( 获取信息记录("<back>","普通") != "" )
				//等待消除全部<back>
				等待(100)
			循环尾()
			如果(人物详细信息(37) > 1)
				等待(4000)
			如果尾()

		如果尾()
	循环尾()

	循环(人物详细信息(34) == "雪拉威森塔１层\\z0")
		如果(isBack == 0)
			移动到(39,99)
			自动寻路(72,72)
			//自动寻路(72,65)
			自动寻路(75,62)

			如果(tower == 10)

			如果尾()

			如果(tower == 15)

			如果尾()

			如果(tower == 20)

			如果尾()

			如果(tower == 25)

			如果尾()

			如果(tower == 30)

			如果尾()

			如果(tower == 35)

			如果尾()

			如果(tower == 40)

			如果尾()

			如果(tower == 45)

			如果尾()

			如果(tower == 49 || tower == 50)
				自动寻路(75,50)
				循环(人物详细信息(34) != "雪拉威森塔５０层\\z0")
					等待(100)
				循环尾()
			如果尾()

		如果尾()

		如果(isBack != 0)
			自动寻路(75,62)
			移动到(72,65)
			自动寻路(72,72)
			移动到(39,99)
			自动寻路(33,99)
			循环(人物详细信息(34) != "国民会馆\\z0")
				等待(100)
			循环尾()

		如果尾()
	循环尾()

	循环(人物详细信息(34) == "雪拉威森塔５０层\\z0")
		如果(isBack == 0)
			如果(tower == 50)

			如果尾()
			如果(tower == 49)
				自动寻路(74,59)
				循环(人物详细信息(34) != "雪拉威森塔４９层\\z0")
					等待(100)
				循环尾()
			如果尾()

		如果尾()

		如果(isBack != 0)
			自动寻路(78,59)
			循环(人物详细信息(34) != "雪拉威森塔１层\\z0")
				等待(100)
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "雪拉威森塔４９层\\z0")

		如果(isBack == 0)
			移动到(80,66)
			//自动遇敌开始了
			自动遇敌(1,3,170)

			循环( 获取信息记录("<back>","普通") != "" )
				//等待消除全部<back>
				等待(100)
			循环尾()

			循环(isBack == 0)
				等待战斗结束()
				curPet = 当前出战宠物()
				如果(人物详细信息(2) < humanBackHP)
					isBack = 1
					跳出循环()
				如果尾()
				如果(人物详细信息(4) < humanBackMP)
					isBack = 1
					跳出循环()
				如果尾()
				如果(宠物详细信息(curPet,2) < petBackHP)
					isBack = 1
					跳出循环()
				如果尾()
				如果(宠物详细信息(curPet,4) < petBackMP)
					isBack = 1
					跳出循环()
				如果尾()
				如果( 获取信息记录("<back>","普通") != "" )
					isBack = 1
					跳出循环()
				如果尾()
			循环尾()

			自动遇敌(0)

		如果尾()

		如果(isBack != 0)
			自动寻路(80,63)
			循环(人物详细信息(34) != "雪拉威森塔５０层\\z0")
				等待(100)
			循环尾()
		如果尾()

	循环尾()

循环尾()
