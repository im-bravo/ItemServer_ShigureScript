// 营地（门口、沙滩）封印扔卡 - 队长
// 请配合【营地-队员】脚本

nPeople = 信息输入("队伍人数","输入队伍成员数(0~5)",人物详细信息(37))
isSaleStone = 信息提示("包满是否出售魔石",36)
isCommonNurse = 信息提示("是否不去普通护士？", 36) != 5
curPet = 当前出战宠物()
monster = 信息输入("营地门口:0，沙滩:1","选择地点","0")
humanBackHP = 人物详细信息(3)*0.5
humanBackMP = 人物详细信息(5)*0.05
petBackHP = 宠物详细信息(curPet,3)*0.4
petBackMP = 宠物详细信息(curPet,5)*0.05
isAutoSettings = 信息提示("是否以下列数值作为设置{ " $ "人回补血:" $ humanBackHP $ ", " $ "人回补魔:" $ humanBackMP $ ", " $ "宠回补血:" $ petBackHP $ ", " $ "宠回补魔:" $ petBackMP $ " }",36)
如果(isAutoSettings != 5)
	humanBackHP = 信息输入("人回补血值","人回补血值",humanBackHP)
	humanBackMP = 信息输入("人回补魔值","人回补魔值",humanBackMP)
	petBackHP = 信息输入("宠回补血值","宠回补血值",petBackHP)
	petBackMP = 信息输入("宠回补魔值","宠回补魔值",petBackMP)
如果尾()

//当前要干嘛（战斗，回补）
iCurAction = 1
//信息输入("1.战斗，2.回补","去干什么",1)
定义数组(curActions, 0)
加入成员(curActions, "战斗")
加入成员(curActions, "回补")
curAction = curActions.iCurAction

//封印卡名
cardName = "封印卡（植物系）"
//cardCount = 18*20
shopItemNo = 9
//curAction = "战斗"

自动叠加道具(2, cardName $ "|20")
自动叠加道具(1)

循环( 1 )

	循环(人物详细信息(34) == "艾尔莎岛")
		//如果( curAction == "战斗" )
			移动到(140,105)
			循环(人物详细信息(34) != "里谢里雅堡")
				对话NPC(1,2,"","","",2)
				tryCount = 0
				循环(tryCount < 20 && 人物详细信息(34) != "里谢里雅堡")
					等待(100)
					tryCount = tryCount + 1
				循环尾()
			循环尾()
		//如果尾()

		//如果(curAction == "回补")
		//如果尾()
	循环尾()

	循环(人物详细信息(34) == "里谢里雅堡")
		如果(curAction == "战斗")
			自动寻路(41,98)
			循环(人物详细信息(34) != "法兰城")
				等待(100)
			循环尾()
		如果尾()

		如果(curAction == "回补")
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "法兰城")
		如果(curAction == "战斗")
			自动寻路(153,241)
			循环(人物详细信息(34) != "芙蕾雅")
				等待(100)
			循环尾()
		如果尾()

		如果(curAction == "回补")
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "芙蕾雅")
		如果(curAction == "战斗")
			自动寻路(513,282)
			循环(人物详细信息(34) != "曙光骑士团营地")
				等待(100)
			循环尾()
		如果尾()

		如果(curAction == "回补")
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "曙光骑士团营地")
		如果(curAction == "战斗")
			移动到(26,59)
			移动到(35,50)
			移动到(52,50)
			自动寻路(55,47)
			循环(人物详细信息(34) != "辛希亚探索指挥部\\z0")
				等待(100)
			循环尾()
		如果尾()

		如果(curAction == "回补")
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "辛希亚探索指挥部\\z0")
		如果(curAction == "战斗")
			退出队伍()
			自动寻路(7,4)
			curX = 人物详细信息(35)
			curY = 人物详细信息(36)
			循环(curX != 91 || curY != 6)
				curX = 人物详细信息(35)
				curY = 人物详细信息(36)
			循环尾()
			自动寻路(95,9)
			循环(curX != 19 || curY != 28)
				curX = 人物详细信息(35)
				curY = 人物详细信息(36)
			循环尾()
			自动寻路(8,22)
			人物转身(7)
			循环(人物详细信息(34) != "圣骑士营地")
				等待(100)
			循环尾()
		如果尾()

		如果(curAction == "回补")
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "商店\\z0")
		如果(curAction == "战斗")
			移动到(5,14)
			移动到(14,26)
			buyCardCount = 20*(20-人物详细信息(33))
			发送聊天("买:" $ cardName $ "|" $ buyCardCount,0,1)
			购买物品(2, shopItemNo $ "|" $ buyCardCount)
			移动到(5,14)
			移动到(1,14)
			移动到(0,14)
			//等0~4s过图
			tryCount = 0
			循环(tryCount < 40 && 人物详细信息(34) != "圣骑士营地")
				等待(100)
				tryCount = tryCount + 1
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "圣骑士营地")
		如果(curAction == "战斗")
			如果(人物详细信息(37) < nPeople )
				自动寻路(97,86)
				切图(7)
				循环(人物详细信息(37) < nPeople)
					等待(1000)
				循环尾()
			如果尾()

			buyCard = 获取物品数量(cardName) < 20
			如果(buyCard != 0)
				自动寻路(91,117)
				移动到(92,118)
				//等0~4s过图
				tryCount = 0
				循环(tryCount < 40 && 人物详细信息(34) != "商店\\z0")
					等待(100)
					tryCount = tryCount + 1
				循环尾()
			如果尾()
			如果(buyCard == 0)
				自动寻路(37,87)
				移动到(36,87)
				//等0~4s过图
				tryCount = 0
				循环(tryCount < 40 && 人物详细信息(34) != "肯吉罗岛")
					等待(100)
					tryCount = tryCount + 1
				循环尾()
			如果尾()

		如果尾()

		如果(curAction == "回补")
			如果(isSaleStone == 5)
				如果(获取物品数量("魔石","") > 0)
					自动寻路(87,72)
					循环(人物详细信息(34) != "工房\\z0")
						等待(100)
					循环尾()
				如果尾()
				如果(获取物品数量("魔石","") < 1)
					自动寻路(95,72)
					循环(人物详细信息(34) != "医院\\z0")
						等待(100)
					循环尾()
				如果尾()
			如果尾()
			如果(isSaleStone != 5)
				自动寻路(95,72)
				循环(人物详细信息(34) != "医院\\z0")
					等待(100)
				循环尾()
			如果尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "工房\\z0")
		如果( curAction == "战斗" )
			自动寻路(30,37)
			循环(人物详细信息(34) != "圣骑士营地")
				等待(100)
			循环尾()
		如果尾()
		如果( curAction == "回补" )
			自动寻路(20,22)
			移动到(20,23)
			移动到(20,22)
			移动到(20,23)
			移动到(20,22)
			移动到(20,23)
			移动到(20,22)
			
			curX = 人物详细信息(35)
			curY = 人物详细信息(36)
			如果(curX == 20 && curY == 23)
				出售物品(2,"魔石|锹型虫的卡片|虎头蜂的卡片|绿色口臭鬼的卡片|水晶怪的卡片|水蜘蛛的卡片|狮鹫的卡片")
			如果尾()
			如果(curX == 20 && curY == 22)
				出售物品(3,"魔石|锹型虫的卡片|虎头蜂的卡片|绿色口臭鬼的卡片|水晶怪的卡片|水蜘蛛的卡片|狮鹫的卡片")
			如果尾()
			等待(12000)
			自动寻路(30,37)
			循环(人物详细信息(34) != "圣骑士营地")
				等待(100)
			循环尾()
		如果尾()

	循环尾()

	循环(人物详细信息(34) == "肯吉罗岛")
		如果( curAction == "战斗" )

			如果(monster == 0)
				自动寻路(545,328)
			如果尾()
			如果(monster == 1)
				自动寻路(472,214)
			如果尾()

			// 自动遇敌开始了
			自动遇敌(1,3,170)

			循环( 获取信息记录("<back>","普通") != "" )
				//等待消除全部<back>
				等待(100)
			循环尾()

			循环(curAction == "战斗")
				等待战斗结束()
				curPet = 当前出战宠物()
				如果(人物详细信息(2) < humanBackHP)
					curAction = "回补"
					跳出循环()
				如果尾()
				如果(人物详细信息(4) < humanBackMP)
					curAction = "回补"
					跳出循环()
				如果尾()
				如果(宠物详细信息(curPet,2) < petBackHP)
					curAction = "回补"
					跳出循环()
				如果尾()
				如果(宠物详细信息(curPet,4) < petBackMP)
					curAction = "回补"
					跳出循环()
				如果尾()
				如果(寻找文本(获取信息记录("<back>","普通"), "[GP]") != -1)
					curAction = "回补"
					跳出循环()
				如果尾()
			循环尾()
			自动遇敌(0)
		如果尾()

		如果(curAction == "回补")
			自动寻路(551,332)
			循环(人物详细信息(34) != "圣骑士营地")
				等待(100)
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "医院\\z0")
		如果(curAction == "战斗")
			自动寻路(5,20)
			移动到(0,20)
			循环(人物详细信息(34) != "圣骑士营地")
				等待(100)
			循环尾()
		如果尾()

		如果(curAction == "回补")
			移动到(5,20)
			如果(isCommonNurse == 0)
				移动到(9,16)
				移动到(9,10)
				移动到(9,12)
				等待(2000)
				护士恢复(1)
			如果尾()
			如果(isCommonNurse != 0)
				自动寻路(17,17)
				//移动到(17,13)
				移动到(17,15)
				//移动到(17,13)
				等待(2000)
				护士恢复(1)
			如果尾()
			curAction = "战斗"
			循环( 获取信息记录("<back>","普通") != "" )
				//等待消除全部<back>
				等待(100)
			循环尾()
		如果尾()
	循环尾()

循环尾()








