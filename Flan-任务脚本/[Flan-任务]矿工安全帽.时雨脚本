// 刷矿工安全帽 - 矿工职业限定

//当前执行的动作【拿钥匙，挖道具，交任务】
curAction = 信息输入("执行动作【拿钥匙，挖道具，交任务】","执行动作","拿钥匙")

//挖的道具【玛瑙，赤铁矿，天青石】
curDig = ""
//信息输入("挖什么【玛瑙，赤铁矿，天青石】","挖什么","玛瑙")

自动叠加道具(2, "金|40")
自动叠加道具(2, "银|40")
自动叠加道具(2, "铜|40")
自动叠加道具(1)


循环( 1 )

	循环(人物详细信息(34) == "艾尔莎岛")
		移动到(140,105)
		循环(人物详细信息(34) != "里谢里雅堡")
			对话NPC(1,2,"","","",2)
			tryCount = 0
			循环(tryCount < 20 && 人物详细信息(34) != "里谢里雅堡")
				等待(100)
				tryCount = tryCount + 1
			循环尾()
		循环尾()
	循环尾()

	循环(人物详细信息(34) == "里谢里雅堡")
		curPet = 当前出战宠物()
		如果(人物详细信息(2) < 人物详细信息(3) || 人物详细信息(4) < 人物详细信息(5) || 宠物详细信息(curPet,2) < 宠物详细信息(curPet,3) || 宠物详细信息(curPet,4) < 宠物详细信息(curPet,5))
			//恢复血魔
			自动寻路(34,89)
			护士恢复(1)
		如果尾()

		如果(curAction == "拿钥匙")
			如果(获取物品数量("铜") > 19 || 获取物品数量("银") > 19 || 获取物品数量("金") > 19)
				自动寻路(30,79)
				出售物品(0, "铜|银|金")
			如果尾()

			如果(获取物品数量("给朋友的信") < 1 && 获取物品数量("矿山钥匙") < 1)
				自动寻路(47,85)
				循环(人物详细信息(34) != "召唤之间\\z5")
					等待(100)
				循环尾()
			如果尾()

			如果(获取物品数量("给朋友的信") > 0)
				自动寻路(17,53)
				循环(人物详细信息(34) != "法兰城")
					等待(100)
				循环尾()
			如果尾()

			如果(获取物品数量("矿山钥匙") > 0)
				curAction = "挖道具"
			如果尾()

		如果尾()

		如果(curAction == "挖道具")
			自动寻路(17,53)
			循环(人物详细信息(34) != "法兰城")
				等待(100)
			循环尾()

		如果尾()

		如果(curAction == "交任务")
			如果(获取物品数量("牢房钥匙") < 1)
				自动寻路(17,53)
				循环(人物详细信息(34) != "法兰城")
					等待(100)
				循环尾()
			如果尾()

			如果(获取物品数量("牢房钥匙") > 0)
				自动寻路(47,85)
				循环(人物详细信息(34) != "召唤之间\\z5")
					等待(100)
				循环尾()
			如果尾()

		如果尾()
		
	循环尾()

	循环(人物详细信息(34) == "法兰城")
		如果(curAction == "拿钥匙")
			如果(获取物品数量("给朋友的信") < 1 && 获取物品数量("矿山钥匙") < 1)
				登出回城()
			如果尾()

			如果(获取物品数量("给朋友的信") > 0)
				自动寻路(61,63)
				循环(人物详细信息(34) != "仓库内部\\z0")
					等待(100)
				循环尾()
			如果尾()

			如果(获取物品数量("矿山钥匙") > 0)
				curAction = "挖道具"
			如果尾()

		如果尾()

		如果(curAction == "交任务")
			自动寻路(61,63)
			循环(人物详细信息(34) != "仓库内部\\z0")
				等待(100)
			循环尾()
		如果尾()

		如果(curAction == "挖道具")
			自动寻路(22,88)
			循环(人物详细信息(34) != "芙蕾雅")
				等待(100)
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "芙蕾雅")
		如果(curAction == "挖道具")
			自动寻路(351,145)
			循环(人物详细信息(34) != "国营第24坑道\S地下1楼\\z12")
				等待(100)
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "国营第24坑道\S地下1楼\\z12")
		如果(curAction == "挖道具")
			自动寻路(22,22)
			循环(人物详细信息(34) != "国营第24坑道\S地下2楼\\z12")
				等待(100)
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "国营第24坑道\S地下2楼\\z12")
		如果(curAction == "挖道具")
			自动寻路(22,21)
			循环(人物详细信息(35) != 22 || 人物详细信息(36) != 19 )
				人物转身(0)
			循环尾()
			
			自动寻路(23,13)
			循环(人物详细信息(34) != "国营第24坑道\S\S地下3楼\\z12")
				等待(100)
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "国营第24坑道\S\S地下3楼\\z12")
		如果(curAction == "挖道具")
			如果( 获取物品数量("天青石") < 3 )
				curDig = "天青石"
			如果尾()
			如果( 获取物品数量("赤铁矿") < 3 )
				curDig = "赤铁矿"
			如果尾()
			如果( 获取物品数量("玛瑙") < 3 )
				curDig = "玛瑙"
			如果尾()

			如果(curDig == "玛瑙")
				自动寻路(20,20)
				//开始挖矿
				myMana = 人物详细信息(4)
				如果(myMana != "")
					发送聊天("开始挖[" $ curDig $ "]！",4,1)
					循环(人物详细信息(4) > 1 && 人物详细信息(33) < 20 && 获取物品数量(curDig) < 3)
						高速采集("挖掘", 5100, "", "", "")
					循环尾()
					
					curDig = ""
				如果尾()
				如果(myMana == "")
					发送聊天("外挂可能出现问题，请重启外挂和游戏！",6,1)
				如果尾()
			如果尾()
			如果(curDig == "赤铁矿")
				自动寻路(29,3)
				循环(人物详细信息(34) != "国营第24坑道\S\S地下4楼\\z12")
					等待(100)
				循环尾()
			如果尾()
			如果(curDig == "天青石")
				自动寻路(6,3)
				循环(人物详细信息(34) != "国营第24坑道\S\S地下4楼\\z12")
					等待(100)
				循环尾()
			如果尾()
		如果尾()

	循环尾()

	循环(人物详细信息(34) == "国营第24坑道\S\S地下4楼\\z12")
		如果(curAction == "挖道具")
			如果(curDig == "天青石")
				移动到(23,24)
				移动到(23,13)
				移动到(6,8)
				移动到(6,4)
				移动到(5,3)
				//开始挖矿
				myMana = 人物详细信息(4)
				如果(myMana != "")
					发送聊天("开始挖[" $ curDig $ "]！",4,1)
					循环(人物详细信息(4) > 1 && 人物详细信息(33) < 20 && 获取物品数量(curDig) < 3)
						高速采集("挖掘", 5100, "", "", "")
					循环尾()

					如果(获取物品数量("玛瑙") >= 3 && 获取物品数量("赤铁矿") >= 3 && 获取物品数量("天青石") >= 3)
						curDig = ""
						登出回城()
						curAction = "交任务"
					如果尾()
				如果尾()
				如果(myMana == "")
					发送聊天("外挂可能出现问题，请重启外挂和游戏！",6,1)
				如果尾()
			如果尾()

			如果(curDig == "赤铁矿")
				自动寻路(21,16)
				//开始挖矿
				myMana = 人物详细信息(4)
				如果(myMana != "")
					发送聊天("开始挖[" $ curDig $ "]！",4,1)
					循环(人物详细信息(4) > 1 && 人物详细信息(33) < 20 && 获取物品数量(curDig) < 3)
						高速采集("挖掘", 5100, "", "", "")
					循环尾()

					自动寻路(33,30)
					循环(人物详细信息(34) != "国营第24坑道\S\S地下3楼\\z12")
						等待(100)
					循环尾()
					curDig = ""
				如果尾()
				如果(myMana == "")
					发送聊天("外挂可能出现问题，请重启外挂和游戏！",6,1)
				如果尾()
			如果尾()

		如果尾()
	循环尾()

	循环(人物详细信息(34) == "仓库内部\\z0")
		如果(curAction == "拿钥匙")
			如果(获取物品数量("给朋友的信") < 1 && 获取物品数量("矿山钥匙") < 1)
				登出回城()
			如果尾()

			如果(获取物品数量("给朋友的信") > 0)
				移动到(11,9)
				循环(获取物品数量("矿山钥匙") < 1)
					对话NPC(2,7,"","","","")
					等待(900)
				循环尾()
			如果尾()

			如果(获取物品数量("矿山钥匙") > 0)
				自动寻路(10,16)
				循环(人物详细信息(34) != "法兰城")
					等待(100)
				循环尾()
				curAction = "挖道具"
			如果尾()

		如果尾()

		如果(curAction == "交任务")
			移动到(11,9)
			循环(获取物品数量("牢房钥匙") < 1)
				对话NPC(2,7,"","","","")
				等待(900)
			循环尾()
			
			登出回城()
		如果尾()

	循环尾()

	循环(人物详细信息(34) == "召唤之间\\z5")
		如果(curAction == "拿钥匙"||curAction == "交任务")
			自动寻路(27,8)
			循环(人物详细信息(34) != "回廊\\z5")
				等待(100)
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "回廊\\z5")
		如果(curAction == "拿钥匙"||curAction == "交任务")
			自动寻路(23,19)
			循环(人物详细信息(34) != "灵堂\\z5")
				等待(100)
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "灵堂\\z5")
		如果(curAction == "拿钥匙"||curAction == "交任务")
			自动寻路(7,52)
			循环(人物详细信息(34) != "地下牢房\\z0")
				等待(100)
			循环尾()
		如果尾()
	循环尾()

	循环(人物详细信息(34) == "地下牢房\\z0")
		如果(curAction == "拿钥匙")
			自动寻路(31,20)
			循环(获取物品数量("给朋友的信") < 1)
				对话NPC(2, 7, "", "", "", 2)
				等待(900)
			循环尾()

			登出回城()
		如果尾()
		
		如果(curAction == "交任务")
			自动寻路(31,20)
			对话NPC(2, 7, "", "", "", "")

			curAction = "拿钥匙"
		如果尾()

	循环尾()

循环尾()

